# Nestjs + Prisma databases benchmark
Проект для тестирования производительности баз данных, используемых в Nestjs + Prisma.

## Исследуемые кейсы и сценарии
Сравнение не реляционной и реляционной db (mongodb, postgres).
- [ ] Поиск
  - [ ] по нескольким значениям
  - [ ] по одному значению
  - [ ] по enum
  - [ ] полнотекстовый поиск
- [ ] Performance
  - [ ] Сравнение производительности
    - [ ] с использованием связей (1:1, 1:n, n:n)
    - [ ] без использования связей
  - [ ] Замер производительности при
    - [ ] записи
    - [ ] чтении
    - [ ] удалении
- [ ] Влияние индексов на производительность

## Модель базы данных
### Postgres
![Postgres](./docs/images/pg-erd.svg)

### Mongodb
![Mongodb](./docs/images/mongo-erd.svg)

## Наблюдения
Большая нагрузка приводит к тому, что mongodb не справляется с ней и все данные в базе становятся неконсистентными, что приводит к потере всех данных.
Данная проблема проявилась при попытке записать 10000 записей в базу данных.

Образ mongodb: `prismagraphql/mongo-single-replica:4.4.3-bionic`.
Он реализует простую репликацию на основе одного экземпляра mongodb. Вероятно это и стало причиной потери данных.
